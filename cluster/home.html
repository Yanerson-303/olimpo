<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="data/img/casco-logo.png">
  <title>Legiones de Roma - Sistema de Virtud</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles/global.css">
  <link rel="stylesheet" href="styles/home.css">
</head>

<body class="bg-light">
  <!-- Efectos de luces ambientales -->
  <div class="light-effect light-1"></div>
  <div class="light-effect light-2"></div>
  <div class="light-effect light-3"></div>
<!-- M√∫sica de fondo -->
<audio id="bg-music" src="data/sound/fuego.mp3" preload="auto" loop></audio>
<audio id="bg-music" src="data/sound/aura.mp3" preload="auto" loop></audio>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const audio = document.getElementById("bg-music");

  // Esperar la primera interacci√≥n del usuario
  document.body.addEventListener("click", () => {
    audio.play().catch(err => console.log("El navegador bloque√≥ la reproducci√≥n autom√°tica:", err));
  }, { once: true });
});
</script>


<div class="bd-example m-0 border-0 bd-example-row">
  <div class="container text-center">
    <div class="row">
      <!-- Perfil -->
      <div class="col" style="background-color: rgba(106, 114, 121, 0.25) !important; color: black; text-shadow: 0 0 10px #3e330639;">
        <div class="dropdown">
          <a href="#" class="d-block text-decoration-none" data-bs-toggle="dropdown" aria-expanded="false">
            <img src="https://github.com/mdo.png" alt="Perfil" width="32" height="32" class="rounded-circle">
          </a>
          <ul class="dropdown-menu text-small shadow">
            <li><a class="dropdown-item" href="#"><i class="fas fa-plus-circle me-2"></i>Nuevo proyecto</a></li>
            <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Configuraci√≥n</a></li>
            <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Perfil</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i>Cerrar sesi√≥n</a></li>
          </ul>
        </div>
      </div>
      
      <!-- Misiones -->
      <div class="col" style="background-color: rgba(106, 114, 121, 0.25) !important; color: color: black; text-shadow: 0 0 10px #3e330630;">
        <div class="d-flex justify-content-center">
          <button type="button" class="btn btn-warning btn-sm d-flex align-items-center" onclick="mostrarMisiones()">
            <span class="me-1">üìú</span>
            <span class="d-none d-sm-inline">Misiones</span>
          </button>
        </div>
      </div>
      
      <!-- Tienda -->
      <div class="col" style="background-color: rgba(106, 114, 121, 0.25) !important; color: color: black; text-shadow: 0 0 10px #3e33064b;">
        <div class="d-flex justify-content-center">
          <button class="btn btn-outline-dark d-flex align-items-center" type="button" onclick="mostrarTienda()">
            <span class="me-2">üè™</span>
            <span>Tienda</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


    <style>
        /* üîò Botones flotantes */
        .btn-floating {
            position: fixed;
            left: 15px;
            background-color: #00ff0000;
            color: black;
            border: none;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            font-size: 1.8rem;
            text-shadow: 0 0 10px #3e3306;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-floating:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px #3e3306;;
        }

        /* Posicionamiento de botones - CORREGIDO */
        #info-btn {
            top: 35%;
        }

        #inventory-btn {
            top: 50%;
            transform: translateY(-50%);
        }

        #map-btn {
            top: 60%;
        }

        /* üîπ Contenedores del men√∫ emergente */
        .menu-content {
            position: fixed;
            left: 20%;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.85);
            border: 1% solid #3e3306;
            border-radius: 12px;
            padding: 1%;
            width: 35em;
            display: none;
            z-index: 999;
            backdrop-filter: blur(6%);
        }

        /* Estilos de texto */
        .text-center {
            text-align: center;
        }
        
        .text-primary {
            color: #3e3306;
        }
        
        .text-info {
            color: #00ccff;
        }
        
        .text-warning {
            color: #ffcc00;
        }
        
        .text-light {
            color: #f0f0f0;
        }
        
        .mb-2 {
            margin-bottom: 0.5rem;
        }
        
        .small {
            font-size: 0.875rem;
        }
        
        .shadow {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }
        
        /* Estilos espec√≠ficos para el mapa */
        #map-container {
            height: 200px;
            background-color: #1a1a1a;
            border-radius: 8px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #3e3306;;
            border: 1px solid #3e3306;;
        }
        
        /* Estilos para el inventario */
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(1, 10fr);
            gap: 100em;
            margin-top: 100em;
        }
        
        .inventory-slot {
            background-color: #1a1a1a;
            border: 1% solid #3e3306;;
            border-radius: 1%;
            height: 90%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #3e3306;;
        }
    </style>


    <!-- üì¨ Bot√≥n flotante con icono de buz√≥n para informaci√≥n -->
    <button id="info-btn" class="btn-floating" title="Informaci√≥n">
        üì¨
    </button>

    <!-- üéí Bot√≥n flotante con icono de mochila para inventario -->
    <button id="inventory-btn" class="btn-floating" title="Inventario">
        üéí
    </button>

    <!-- üó∫Ô∏è Bot√≥n flotante con icono de mapa para ubicaci√≥n -->
    <button id="map-btn" class="btn-floating" title="Mapa">
        üó∫Ô∏è
    </button>

    <!-- üì¨ Contenedor de informaci√≥n -->
    <div id="info-panel" class="menu-content shadow">
        <h5 class="text-center text-primary mb-2">Informaci√≥n</h5>
        <p class="text-light small text-center">Actualizaciones recientes</p>
        <div class="update-list">
            <p class="text-light small">‚Ä¢ Nueva versi√≥n 2.1 disponible</p>
            <p class="text-light small">‚Ä¢ Correcci√≥n de errores menores</p>
            <p class="text-light small">‚Ä¢ Mejoras en el rendimiento</p>
        </div>
    </div>

    <!-- üéí Contenedor de inventario -->
    <div id="inventory-panel" class="menu-content shadow">
    <!-- ====== üéí INVENTARIO DE ROPA ====== -->
    <div class="container my-4">
      <div class="row">
        <div class="col-12">
          <div class="card bg-dark border-warning">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h4 class="mb-0" style="color: white;">üéí Inventario de Ropa</h4>
            </div>
            <div class="card-body">
              <div class="row" id="inventario-ropa">
                <!-- Los items de ropa se generar√°n aqu√≠ din√°micamente -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- üó∫Ô∏è Contenedor de mapa -->
    <div id="map-panel" class="menu-content shadow">
        <h5 class="text-center text-warning mb-2">Mapa</h5>
        <p class="text-light small text-center">Tu ubicaci√≥n actual</p>
        <div id="map-container">
            <p>üìç Ubicaci√≥n: Ciudad Central</p>
        </div>
    </div>

    <script>
        // Referencias a elementos
        const infoBtn = document.getElementById("info-btn");
        const inventoryBtn = document.getElementById("inventory-btn");
        const mapBtn = document.getElementById("map-btn");
        
        const infoPanel = document.getElementById("info-panel");
        const inventoryPanel = document.getElementById("inventory-panel");
        const mapPanel = document.getElementById("map-panel");
        
        // Funci√≥n para ocultar todos los paneles
        function hideAllPanels() {
            infoPanel.style.display = "none";
            inventoryPanel.style.display = "none";
            mapPanel.style.display = "none";
        }
        
        // Alternar visibilidad de paneles
        infoBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            if (infoPanel.style.display === "block") {
                infoPanel.style.display = "none";
            } else {
                hideAllPanels();
                infoPanel.style.display = "block";
            }
        });
        
        inventoryBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            if (inventoryPanel.style.display === "block") {
                inventoryPanel.style.display = "none";
            } else {
                hideAllPanels();
                inventoryPanel.style.display = "block";
            }
        });
        
        mapBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            if (mapPanel.style.display === "block") {
                mapPanel.style.display = "none";
            } else {
                hideAllPanels();
                mapPanel.style.display = "block";
            }
        });
        
        // Cerrar paneles al hacer clic fuera
        document.addEventListener("click", () => {
            hideAllPanels();
        });
        
        // Evitar que los paneles se cierren al hacer clic dentro de ellos
        document.querySelectorAll(".menu-content").forEach(panel => {
            panel.addEventListener("click", (e) => {
                e.stopPropagation();
            });
        });
    </script>



<!-- ====== üí∞ ESTAD√çSTICAS (Centro) ====== -->
<div class="col-12 col-md-6 col-lg-8 mb-2 mb-md-0">
  <div class="row justify-content-center g-2 g-sm-3">
    
    <!-- Dragmas -->
    <div class="col-6 col-sm-4 col-md-3 col-lg-2">
      <div class="stat-item bg-secondary bg-opacity-25 rounded p-2 text-center" title="Dragmas disponibles">
        <div class="stat-icon fs-5">üí∞</div>
        <div class="stat-value fw-bold" id="dragmas-count">0</div>
        <div class="stat-label small">Dragmas</div>
      </div>
    </div>
    
    <!-- Poder -->
    <div class="col-6 col-sm-4 col-md-3 col-lg-2">
      <div class="stat-item bg-secondary bg-opacity-25 rounded p-2 text-center" title="Nivel de poder f√≠sico">
        <div class="stat-icon fs-5">üí™</div>
        <div class="stat-value fw-bold" id="poder-count">0</div>
        <div class="stat-label small">Poder</div>
      </div>
    </div>
    
    <!-- Conocimiento -->
    <div class="col-6 col-sm-4 col-md-3 col-lg-2">
      <div class="stat-item bg-secondary bg-opacity-25 rounded p-2 text-center" title="Conocimiento acumulado">
        <div class="stat-icon fs-5">üìö</div>
        <div class="stat-value fw-bold" id="conocimiento-count">0</div>
        <div class="stat-label small">Conocimiento</div>
      </div>
    </div>
    
    <!-- Influencia -->
    <div class="col-6 col-sm-4 col-md-3 col-lg-2">
      <div class="stat-item bg-secondary bg-opacity-25 rounded p-2 text-center" title="Influencia social">
        <div class="stat-icon fs-5">üó£Ô∏è</div>
        <div class="stat-value fw-bold" id="influencia-count">0</div>
        <div class="stat-label small">Influencia</div>
      </div>
    </div>
    
    <!-- Amigos -->
    <div class="col-6 col-sm-4 col-md-3 col-lg-2">
      <div class="stat-item bg-secondary bg-opacity-25 rounded p-2 text-center" onclick="mostrarAmigos()" title="C√≠rculo de amigos - Click para gestionar" style="cursor: pointer;">
        <div class="stat-icon fs-5">üë•</div>
        <div class="stat-value fw-bold">
          <span id="amigos-count">0</span>
          <span class="stat-limit small opacity-75">/50</span>
        </div>
        <div class="stat-label small">Amigos</div>
      </div>
    </div>
    
    <!-- Jerarqu√≠a -->
    <div class="col-6 col-sm-4 col-md-3 col-lg-2">
      <div class="stat-item bg-secondary bg-opacity-25 rounded p-2 text-center" onclick="mostrarPiramide()" title="Nivel en la jerarqu√≠a - Click para ver detalles" style="cursor: pointer;">
        <div class="stat-icon fs-5">üèõÔ∏è</div>
        <div class="stat-value fw-bold" id="rango">SIN VIRTUD</div>
        <div class="stat-label small">Jerarqu√≠a</div>
      </div>
    </div>
  </div>
</div>


<!-- ====== üèõÔ∏è CONTENIDO CENTRAL ====== -->
<div class="main-content">
  <img src="data/img/casco-logo.png" alt="Escudo Romano" class="center-image" id="rightClickImage">
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const image = document.getElementById('rightClickImage');
  let touchTimer;
  
  // Detectar toque largo para simular clic derecho
  image.addEventListener('touchstart', function(e) {
    e.preventDefault();
    touchTimer = setTimeout(() => {
      // Disparar evento de clic derecho
      const rightClickEvent = new MouseEvent('contextmenu', {
        bubbles: true,
        cancelable: true,
        view: window,
        button: 2, // Bot√≥n derecho
        buttons: 2
      });
      image.dispatchEvent(rightClickEvent);
    }, 80); // 500ms = toque largo
  });

  // Cancelar si el usuario levanta el dedo r√°pido
  image.addEventListener('touchend', function(e) {
    clearTimeout(touchTimer);
  });

  // Cancelar si el usuario mueve el dedo
  image.addEventListener('touchmove', function(e) {
    clearTimeout(touchTimer);
  });

  // Manejar el clic derecho (nativo del navegador)
  image.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    // Aqu√≠ se abrir√° el men√∫ contextual nativo del navegador
    // o puedes mostrar tu propio men√∫ personalizado
    console.log('Click derecho activado en la imagen');
    
    // Para forzar el men√∫ nativo (depende del navegador)
    // Esto puede no funcionar en todos los navegadores m√≥viles
    // debido a restricciones de seguridad
  });
});
</script>


<!-- ====== üõí MODAL VENDER ====== -->
<div class="modal fade" id="venderModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content bg-dark border-warning">
      <div class="modal-header">
        <h5 class="modal-title">üí∞ Vender Ropa</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p>¬øCu√°ntos dragmas vale <strong id="nombre-prenda"></strong>?</p>
        <div class="input-group mb-3">
          <input type="number" class="form-control bg-secondary text-light" id="precio-prenda" min="1" max="100" value="10">
          <span class="input-group-text bg-warning text-dark">dragmas</span>
        </div>
        <div class="alert alert-info">
          <small>Dragmas actuales: <span id="dragmas-actuales">100</span></small>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-warning" id="confirmar-venta">Vender</button>
      </div>
    </div>
  </div>
</div>

<!-- ====== üè™ MODAL TIENDA ====== -->
<div class="modal fade" id="tiendaModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content bg-dark border-warning">
      <div class="modal-header">
        <h5 class="modal-title">üè™ Tienda - Dragmas: <span id="dragmas-tienda">0</span></h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="tienda-contenido">
        <!-- Los componentes de la tienda se cargar√°n aqu√≠ autom√°ticamente -->
      </div>
    </div>
  </div>
</div>

    <!-- ====== üìú MODAL MISIONES ====== -->
    <div class="modal fade" id="misionesModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content roman-border">
          <div class="modal-header">
            <h5 class="modal-title">üìú Gesti√≥n de Dragmas: <span id="dragmas-misiones">0</span></h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="input-group mb-3">
              <input type="number" id="dragmas-input" class="form-control" placeholder="Cantidad de dragmas">
              <button class="btn btn-success" onclick="agregarDragmas()">‚ûï Agregar</button>
              <button class="btn btn-danger" onclick="quitarDragmas()">‚ûñ Quitar</button>
            </div>

            <div class="row mt-4">
              <div class="col-md-6">
                <h6>üí™ Ejercicio F√≠sico</h6>
                <div class="input-group mb-2">
                  <input type="number" id="ejercicio-tiempo" class="form-control" placeholder="Tiempo">
                  <select id="ejercicio-unidad" class="form-select">
                    <option value="minutos">Minutos</option>
                    <option value="horas">Horas</option>
                  </select>
                  <button class="btn btn-primary" onclick="registrarEjercicio()">Registrar</button>
                </div>
                <small class="text-muted">M√°ximo 4 horas por d√≠a. Extra: -1 desgaste/30min</small>
              </div>

              <div class="col-md-6">
                <h6>üìö Estudio</h6>
                <div class="mb-2">
                  <label>Theor√≠a:</label>
                  <div class="input-group">
                    <input type="number" id="teoria-cantidad" class="form-control">
                    <select id="teoria-unidad" class="form-select">
                      <option value="minutos">Minutos</option>
                      <option value="horas">Horas</option>
                      <option value="dias">D√≠as</option>
                      <option value="semanas">Semanas</option>
                      <option value="a√±os">A√±os</option>
                    </select>
                  </div>
                </div>
                <div class="mb-2">
                  <label>Pr√°ctica:</label>
                  <div class="input-group">
                    <input type="number" id="practica-cantidad" class="form-control">
                    <select id="practica-unidad" class="form-select">
                      <option value="minutos">Minutos</option>
                      <option value="horas">Horas</option>
                      <option value="dias">D√≠as</option>
                      <option value="semanas">Semanas</option>
                      <option value="a√±os">A√±os</option>
                    </select>
                  </div>
                </div>
                <button class="btn btn-primary" onclick="registrarEstudio()">Registrar Estudio</button>
              </div>
            </div>

            <div class="row mt-4">
              <div class="col-md-6">
                <h6>üó£Ô∏è Influencia Social</h6>
                <div class="input-group mb-3">
                  <input type="number" id="personas-hoy" class="form-control" placeholder="Personas hoy" min="0"
                    max="1500">
                  <button class="btn btn-info" onclick="registrarInteracciones()">Registrar</button>
                </div>
                <div id="influencia-alerta"></div>
              </div>

              <div class="col-md-6">
                <h6>üë• Gesti√≥n de Amigos</h6>
                <button class="btn btn-success w-100 mb-2" onclick="mostrarAgregarAmigo()">‚ûï Agregar Amigo</button>
                <button class="btn btn-warning w-100" onclick="mostrarEstadisticasAmigos()">üìä Estad√≠sticas</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ====== üë• MODAL AMIGOS ====== -->
    <div class="modal fade" id="amigosModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content roman-border">
          <div class="modal-header">
            <h5 class="modal-title">üë• Amigos: <span id="amigos-total">0</span>/50</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div id="lista-amigos" class="mb-3"></div>
            <div class="progress mb-3">
              <div id="amigos-progress" class="progress-bar" style="width: 0%"></div>
            </div>
            <button class="btn btn-success w-100 mb-2" onclick="mostrarAgregarAmigo()">‚ûï Agregar Amigo</button>
            <button class="btn btn-danger w-100" onclick="mostrarEliminarAmigo()">üóëÔ∏è Eliminar Amigo</button>
          </div>
        </div>
      </div>
    </div>

    <!-- =====Ô∏è MODAL AGREGAR AMIGO ====== -->
    <div class="modal fade" id="agregarAmigoModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content roman-border">
          <div class="modal-header">
            <h5 class="modal-title">‚ûï Agregar Amigo</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label>Nombre/Apodo:</label>
              <input type="text" id="amigo-nombre" class="form-control">
            </div>
            <div class="mb-3">
              <label>C√≠rculo:</label>
              <select id="amigo-circulo" class="form-select">
                <option value="1">1¬∞ C√≠rculo - Familia</option>
                <option value="2">2¬∞ C√≠rculo - Familia Lejana</option>
                <option value="3">3¬∞ C√≠rculo - Amigo Leal</option>
                <option value="4">4¬∞ C√≠rculo - Conocido</option>
                <option value="5">5¬∞ C√≠rculo - Herrante</option>
              </select>
            </div>
            <button class="btn btn-primary w-100" onclick="agregarAmigo()">Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- =====Ô∏è MODAL PIR√ÅMIDE ====== -->
    <div class="modal fade" id="piramideModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content roman-border">
          <div class="modal-header">
            <h5 class="modal-title">üèõÔ∏è Pir√°mide de Virtud</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body text-center">
            <div class="piramide">
              <div class="nivel-piramide nivel-5" id="nivel-enigma">
                <div class="rango-nombre">ENIGMA ‚òÖ</div>
                <div class="rango-desc">Creador de realidades</div>
              </div>
              <div class="nivel-piramide nivel-4" id="nivel-alfa">
                <div class="rango-nombre">ALFA ‚ôõ</div>
                <div class="rango-desc">L√≠der nato</div>
              </div>
              <div class="nivel-piramide nivel-3" id="nivel-delta">
                <div class="rango-nombre">DELTA ‚ñº</div>
                <div class="rango-desc">Resiliencia y experiencia</div>
              </div>
              <div class="nivel-piramide nivel-2" id="nivel-beta">
                <div class="rango-nombre">BETA ‚ñ¨</div>
                <div class="rango-desc">Conformista</div>
              </div>
              <div class="nivel-piramide nivel-1" id="nivel-omega">
                <div class="rango-nombre">OMEGA ‚ñΩ</div>
                <div class="rango-desc">Base de la pir√°mide</div>
              </div>
              <div class="nivel-piramide nivel-0" id="nivel-sin-virtud">
                <div class="rango-nombre">SIN VIRTUD</div>
                <div class="rango-desc">Comienza tu camino</div>
              </div>
            </div>
            <div class="mt-3">
              <h6>Tu posici√≥n actual: <span id="posicion-actual" class="fw-bold"></span></h6>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ====== üîî TOASTS ====== -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
      <div id="toast" class="toast align-items-center text-bg-dark border-0" role="alert">
        <div class="d-flex">
          <div id="toast-body" class="toast-body"></div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
      </div>
    </div>
  </main>

  <script src="js/global.js"></script>
  <script src="js/home.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>