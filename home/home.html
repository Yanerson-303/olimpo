
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Legiones de Roma - Misiones</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Variables CSS para tamaños escalables */
    :root {
      --base-size: 0.5vw; /* Reducido para pantallas grandes */
      --padding-base: calc(var(--base-size) * 2);
      --font-size-base: calc(var(--base-size) * 1.5);
      --element-width: calc(var(--base-size) * 15); /* Más pequeño */
      --element-height: calc(var(--base-size) * 3); /* Más pequeño */
      
      /* Colores personalizados */
      --color-primary: #8B4513; /* Marrón romano */
      --color-secondary: #D4AF37; /* Dorado */
      --color-accent: #C0C0C0; /* Plateado */
      --color-dark: #2F2F2F; /* Fondo oscuro */
      --color-light: #F5F5DC; /* Beige claro */
    }

    /* Ajustes para pantallas muy pequeñas */
    @media (max-width: 768px) {
      :root {
        --base-size: 1.5vw;
      }
    }

    /* Ajustes para pantallas medianas */
    @media (min-width: 769px) and (max-width: 1200px) {
      :root {
        --base-size: 0.8vw;
      }
    }

    /* Ajustes para pantallas muy grandes */
    @media (min-width: 1600px) {
      :root {
        --base-size: 0.4vw;
      }
    }

    /* Estilos personalizados con unidades relativas */
    .fixed-top-right {
      position: fixed;
      top: calc(var(--base-size) * 10); /* Más pequeño */
      right: calc(var(--base-size) * 2);
      z-index: 1000;
    }

    .fixed-top-left {
      position: fixed;
      top: calc(var(--base-size) * 10); /* Más pequeño */
      left: calc(var(--base-size) * 2);
      z-index: 1000;
    }

    .fixed-top-center {
      position: fixed;
      top: calc(var(--base-size) * 10); /* Más pequeño */
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
    }

    .fixed-bottom {
      position: fixed;
      bottom: calc(var(--base-size) * 2);
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      width: calc(var(--base-size) * 60); /* Más pequeño */
      max-width: 70%; /* Más pequeño */
    }

    /* Ajuste para que el contenido no quede oculto por elementos fijos */
    body {
      padding-top: calc(var(--base-size) * 15); /* Reducido */
      padding-bottom: calc(var(--base-size) * 15); /* Reducido */
      margin: 0;
      font-size: var(--font-size-base);
      background: linear-gradient(135deg, #1a1a1a 0%, #2d1b0e 100%);
      min-height: 100vh;
      color: var(--color-light);
      font-family: 'Georgia', serif;
      overflow-x: hidden;
      position: relative;
    }

    /* Efecto de textura de pergamino en el fondo */
    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" opacity="0.05"><rect width="100" height="100" fill="none" stroke="%23D4AF37" stroke-width="2"/><path d="M0,0 L100,100 M100,0 L0,100" stroke="%23D4AF37" stroke-width="1"/></svg>');
      z-index: -1;
      pointer-events: none;
    }

    /* Efectos de luces ambientales */
    .light-effect {
      position: fixed;
      border-radius: 50%;
      filter: blur(40px);
      opacity: 0.15;
      z-index: -1;
      pointer-events: none;
    }
    
    .light-1 {
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, #D4AF37 0%, transparent 70%);
      top: 10%;
      left: 10%;
      animation: float 15s infinite ease-in-out;
    }
    
    .light-2 {
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, #8B4513 0%, transparent 70%);
      bottom: 5%;
      right: 15%;
      animation: float 20s infinite ease-in-out reverse;
    }
    
    .light-3 {
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, #C0C0C0 0%, transparent 70%);
      top: 50%;
      left: 80%;
      animation: float 12s infinite ease-in-out;
    }
    
    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(20px, -15px) scale(1.05); }
      50% { transform: translate(-10px, 10px) scale(0.95); }
      75% { transform: translate(-15px, -20px) scale(1.02); }
    }

    /* Botones con tamaño escalable y más pequeños */
    .btn {
      font-size: var(--font-size-base);
      padding: calc(var(--base-size) * 2) calc(var(--base-size) * 2); /* Más pequeño */
      min-width: var(--element-width);
      min-height: var(--element-height);
      border-radius: calc(var(--base-size) * 2);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(212, 175, 55, 0.3);
      background: linear-gradient(145deg, #3a2a1a, #2d1b0e);
      color: var(--color-light);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
      color: var(--color-secondary);
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
      transition: left 0.5s;
    }
    
    .btn:hover::before {
      left: 100%;
    }

    /* Efecto especial para botones importantes */
    .btn-warning {
      background: linear-gradient(145deg, #b8941f, #8a6c0f);
      color: #2d1b0e;
      font-weight: bold;
      text-shadow: 0 1px 1px rgba(255, 255, 255, 0.5);
    }
    
    .btn-primary {
      background: linear-gradient(145deg, #6b4c21, #8B4513);
      color: var(--color-light);
    }
    
    .btn-secondary {
      background: linear-gradient(145deg, #3a3a3a, #2F2F2F);
      color: var(--color-light);
    }

    /* Dropdowns con tamaño escalable */
    .dropdown-menu {
      font-size: var(--font-size-base);
      min-width: calc(var(--element-width) * 1.2); /* Más pequeño */
      background: linear-gradient(145deg, #3a2a1a, #2d1b0e);
      border: 1px solid rgba(212, 175, 55, 0.5);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
    }

    .dropdown-item {
      padding: calc(var(--base-size) * 0.3) calc(var(--base-size) * 0.8); /* Más pequeño */
      color: var(--color-light);
      transition: all 0.2s ease;
    }
    
    .dropdown-item:hover {
      background-color: rgba(212, 175, 55, 0.2);
      color: var(--color-secondary);
    }

    /* Tarjetas con tamaño escalable */
    .card {
      font-size: var(--font-size-base);
      border-radius: calc(var(--base-size) * 1);
      background: linear-gradient(145deg, #3a2a1a, #2d1b0e);
      border: 1px solid rgba(212, 175, 55, 0.3);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      color: var(--color-light);
      position: relative;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--color-secondary), transparent);
    }

    .card-body {
      padding: calc(var(--base-size) * 1);
    }

    /* Títulos escalables */
    h2 {
      font-size: calc(var(--font-size-base) * 1.3); /* Más pequeño */
      margin-bottom: calc(var(--base-size) * 0.5);
      color: var(--color-secondary);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
      font-weight: bold;
      letter-spacing: 1px;
    }

    h3 {
      font-size: calc(var(--font-size-base) * 1.1); /* Más pequeño */
      margin-bottom: calc(var(--base-size) * 0.5);
      color: var(--color-accent);
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    }

    /* Progress bars escalables */
    .progress {
      height: calc(var(--base-size) * 1.5); /* Más pequeño */
      margin-bottom: calc(var(--base-size) * 0.5); /* Más pequeño */
      border-radius: calc(var(--base-size) * 0.5);
      background-color: #2d1b0e;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }
    
    .progress-bar {
      background: linear-gradient(90deg, #8B4513, #D4AF37);
      box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
      transition: width 0.5s ease;
    }

    /* Badges escalables */
    .badge {
      font-size: calc(var(--font-size-base) * 0.7); /* Más pequeño */
      padding: calc(var(--base-size) * 0.3) calc(var(--base-size) * 0.6);
      background: linear-gradient(145deg, #8B4513, #6b4c21);
      color: var(--color-light);
    }

    /* Navbar escalable */
    .navbar-brand {
      font-size: calc(var(--font-size-base) * 1.1); /* Más pequeño */
      color: var(--color-secondary) !important;
      text-shadow: 0 0 10px rgba(212, 175, 55, 0.7);
      font-weight: bold;
      letter-spacing: 1px;
    }

    /* Toast escalable */
    .toast {
      font-size: var(--font-size-base);
      background: linear-gradient(145deg, #3a2a1a, #2d1b0e);
      border: 1px solid rgba(212, 175, 55, 0.5);
      color: var(--color-light);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    }

    /* Dar espacio entre elementos */
    section, article, .card, .container {
      margin-bottom: calc(var(--base-size) * 1); /* Más pequeño */
    }

    button, input, select, textarea {
      margin: calc(var(--base-size) * 0.3); /* Más pequeño */
    }

    /* Contenido central con más espacio */
    .main-content {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 60vh;
      padding: calc(var(--base-size) * 5);
      position: relative;
    }

    /* Imagen decorativa central con efectos */
    .center-image {
      max-width: 40%;
      opacity: 0.8;
      filter: sepia(1) hue-rotate(10deg) brightness(0.9) drop-shadow(0 0 20px rgba(212, 175, 55, 0.5));
      transition: all 0.5s ease;
      animation: pulse 4s infinite ease-in-out;
    }
    
    .center-image:hover {
      transform: scale(1.05);
      filter: sepia(0.7) hue-rotate(15deg) brightness(1.1) drop-shadow(0 0 30px rgba(212, 175, 55, 0.7));
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.03); }
    }

    /* Efectos de sombra más sutiles */
    .shadow {
      box-shadow: 0 calc(var(--base-size) * 0.2) calc(var(--base-size) * 0.4) rgba(0,0,0,0.1) !important;
    }
    
    /* Efectos de partículas decorativas */
    .particle {
      position: absolute;
      background: rgba(212, 175, 55, 0.7);
      border-radius: 50%;
      pointer-events: none;
      z-index: -1;
    }
    
    /* Efecto de borde romano decorativo */
    .roman-border {
      position: relative;
      padding: 10px;
    }
    
    .roman-border::before, .roman-border::after {
      content: '';
      position: absolute;
      width: 30px;
      height: 30px;
      border: 2px solid var(--color-secondary);
    }
    
    .roman-border::before {
      top: 0;
      left: 0;
      border-right: none;
      border-bottom: none;
    }
    
    .roman-border::after {
      bottom: 0;
      right: 0;
      border-left: none;
      border-top: none;
    }
  </style>
</head>
<body class="bg-light">

  <!-- Efectos de luces ambientales -->
  <div class="light-effect light-1"></div>
  <div class="light-effect light-2"></div>
  <div class="light-effect light-3"></div>



  <!-- ====== ⚙️ CONFIGURACIONES (Superior Izquierda) ====== -->
  <div class="fixed-top-left">
    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        ⚙️ Configuraciones
      </button>
      <ul class="dropdown-menu">
        <li><button class="dropdown-item" onclick="guardar()">💾 Guardar Progreso</button></li>
        <li><button class="dropdown-item" onclick="exportar()">📤 Exportar JSON</button></li>
        <li><hr class="dropdown-divider"></li>
        <li>
          <label class="dropdown-item">
            📥 Importar JSON
            <input type="file" class="d-none" id="importar" onchange="importar(event)">
          </label>
        </li>
        <li><button class="dropdown-item text-danger" onclick="reiniciar()">🔄 Reiniciar</button></li>
      </ul>
    </div>
  </div>

  <!-- ====== 📜 MISIONES (Superior Derecha) ====== -->
  <div class="fixed-top-right">
    <div class="dropdown">
      <button class="btn btn-warning dropdown-toggle" type="button" data-bs-toggle="dropdown">
        📜 Misiones
      </button>
      <ul class="dropdown-menu dropdown-menu-end">
        <li><button class="dropdown-item" data-skill="poder" data-points="2">💪 Entrenar 30 min</button></li>
        <li><button class="dropdown-item" data-skill="inteligencia" data-points="2">📚 Leer 20 min</button></li>
        <li><button class="dropdown-item" data-skill="influencia" data-points="1">🗣️ Hablar con alguien nuevo</button></li>
        <li><button class="dropdown-item" data-skill="respeto" data-points="2">🤝 Ayudar a alguien</button></li>
        <li><button class="dropdown-item" data-skill="dinero" data-points="3">💰 Ahorrar $10.000</button></li>
      </ul>
    </div>
  </div>

  <!-- ====== ⚒️ HABILIDADES (Centro Superior) ====== -->
  <div class="fixed-top-center">
    <div class="dropdown">
      <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        ⚒️ Habilidades
      </button>
      <div class="dropdown-menu p-2" style="min-width: calc(var(--element-width) * 1.5);">
        <div id="skills-container"></div>
      </div>
    </div>
  </div>

  <!-- ====== 🏛️ JERARQUÍA (Parte Inferior) ====== -->
  <div class="fixed-bottom">
    <div class="card shadow text-center roman-border">
      <div class="card-body">
        <h2 class="text-success">🏛️ Jerarquía</h2>
        <h3 id="rango" class="fw-bold text-danger">SIMP ☹</h3>
        <p id="descripcion">Usado, sin respeto.</p>
        <button onclick="activarSigma()" class="btn btn-outline-warning">Elegir Camino SIGMA ◇</button>
      </div>
    </div>
  </div>

  <!-- ====== 🏛️ CONTENIDO CENTRAL ====== -->
  <div class="main-content">
    <img src="../data/log/dreamina.png" 
         alt="Escudo Romano" class="center-image">
  </div>

  <!-- ====== 🔔 TOASTS ====== -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="toast" class="toast align-items-center text-bg-dark border-0" role="alert">
      <div class="d-flex">
        <div id="toast-body" class="toast-body"></div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
      </div>
    </div>
  </div>

<script>
  /* ====== ⚙️ VARIABLES GLOBALES ====== */
  let skills = {poder:0, inteligencia:0, influencia:0, respeto:0, dinero:0};
  let niveles = {poder:1, inteligencia:1, influencia:1, respeto:1, dinero:1};
  let sigma = false;

  /* ====== 📜 CLIC EN MISIONES ====== */
  document.addEventListener('DOMContentLoaded', function() {
    // Asignar eventos a los botones de misiones
    document.querySelectorAll('.dropdown-item[data-skill]').forEach(m => {
      m.addEventListener('click', () => {
        if (!m.classList.contains('disabled')) {
          let skill = m.dataset.skill;
          let points = parseInt(m.dataset.points);
          
          skills[skill] += points;
          
          if (skills[skill] >= 10) {
            skills[skill] = 0;
            niveles[skill]++;
            showToast("🎖️ ¡Has subido de nivel en " + skill + "!");
            createParticles(50);
          }
          
          m.classList.add('disabled', 'text-success');
          render();
        }
      });
    });
    
    // Crear partículas decorativas
    createParticles(30);
  });

  /* ====== 🏛️ RANGO SEGÚN PROGRESO ====== */
  function calcularRango() {
    if (sigma) return {titulo: "SIGMA ◇", desc: "Independiente, fuera del sistema."};
    
    let {poder, inteligencia, influencia, respeto, dinero} = skills;
    
    if (poder >= 10 && inteligencia >= 10 && influencia >= 10 && respeto >= 9 && dinero >= 10) 
      return {titulo: "ENIGMA ★", desc: "Creador de realidades."};
    if (poder >= 8 && inteligencia >= 7 && influencia >= 8 && respeto >= 9 && dinero >= 7) 
      return {titulo: "ALFA ♛", desc: "Líder nato, carisma y control."};
    if (poder >= 6 && inteligencia >= 6 && influencia >= 5 && respeto >= 5 && dinero >= 5) 
      return {titulo: "DELTA ▼", desc: "Alfa caído, resiliencia y experiencia."};
    if (poder >= 4 && inteligencia >= 5 && influencia >= 4 && respeto >= 4 && dinero >= 4) 
      return {titulo: "BETA ▬", desc: "Conformista, líder en casa."};
    if (poder >= 2 && inteligencia >= 3 && dinero >= 2) 
      return {titulo: "OMEGA / GAMMA ▽", desc: "Invisible, base de la pirámide."};
    
    return {titulo: "SIMP ☹", desc: "Usado, sin respeto."};
  }

  /* ====== 🎨 ACTUALIZAR INTERFAZ ====== */
  function render() {
    // Actualizar habilidades
    let container = document.getElementById("skills-container");
    container.innerHTML = "";
    
    for (let s in skills) {
      let div = document.createElement("div");
      div.className = "mb-1";
      div.innerHTML = `
        <label class="form-label text-capitalize">${s} 
          <span class="badge bg-secondary" id="nivel-${s}">Nv. ${niveles[s]}</span>
        </label>
        <div class="progress" style="height: 20px;">
          <div id="${s}" class="progress-bar bg-warning" role="progressbar" 
               style="width:${skills[s] * 10}%">${skills[s]}/10</div>
        </div>`;
      container.appendChild(div);
    }
    
    // Actualizar rango
    let rango = calcularRango();
    document.getElementById("rango").innerText = rango.titulo;
    document.getElementById("descripcion").innerText = rango.desc;
  }

  /* ====== 💾 GUARDAR Y RECUPERAR ====== */
  function guardar() {
    localStorage.setItem("legionRoma", JSON.stringify({
      skills, niveles, sigma, fecha: fechaHoy()
    }));
    showToast("📜 Progreso guardado!");
  }
  
  function reiniciar() {
    if (confirm("¿Seguro que quieres reiniciar tu progreso?")) {
      skills = {poder:0, inteligencia:0, influencia:0, respeto:0, dinero:0};
      niveles = {poder:1, inteligencia:1, influencia:1, respeto:1, dinero:1};
      sigma = false;
      
      // Restablecer misiones
      document.querySelectorAll('.dropdown-item[data-skill]').forEach(m => {
        m.classList.remove('disabled', 'text-success');
      });
      
      render();
      showToast("🔄 Progreso reiniciado");
    }
  }
  
  function activarSigma() {
    sigma = true; 
    render();
    showToast("⚡ ¡Has activado el modo SIGMA!");
    createParticles(100);
  }
  
  function fechaHoy() {
    return new Date().toISOString().split("T")[0];
  }

  /* ====== 📂 EXPORTAR/IMPORTAR ====== */
  function exportar() {
    let data = JSON.stringify({skills, niveles, sigma});
    let blob = new Blob([data], {type: "application/json"});
    let a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "legionesRoma.json";
    a.click();
    showToast("📤 Progreso exportado");
  }
  
  function importar(e) {
    let file = e.target.files[0];
    if (!file) return;
    
    let reader = new FileReader();
    reader.onload = function(ev) {
      try {
        let data = JSON.parse(ev.target.result);
        skills = data.skills; 
        niveles = data.niveles; 
        sigma = data.sigma;
        
        // Actualizar estado de misiones
        document.querySelectorAll('.dropdown-item[data-skill]').forEach(m => {
          let skill = m.dataset.skill;
          if (skills[skill] > 0) {
            m.classList.add('disabled', 'text-success');
          } else {
            m.classList.remove('disabled', 'text-success');
          }
        });
        
        render();
        showToast("✅ Progreso importado con éxito!");
      } catch (error) {
        showToast("❌ Error al importar el archivo");
      }
    };
    reader.readAsText(file);
  }

  /* ====== 🔔 TOASTS ====== */
  function showToast(msg) {
    document.getElementById("toast-body").innerText = msg;
    let toast = new bootstrap.Toast(document.getElementById("toast"));
    toast.show();
  }

  /* ====== ✨ EFECTO DE PARTÍCULAS ====== */
  function createParticles(count) {
    // Limpiar partículas existentes
    document.querySelectorAll('.particle').forEach(p => p.remove());
    
    for (let i = 0; i < count; i++) {
      let particle = document.createElement('div');
      particle.classList.add('particle');
      
      // Tamaño aleatorio
      let size = Math.random() * 5 + 2;
      particle.style.width = size + 'px';
      particle.style.height = size + 'px';
      
      // Posición aleatoria
      particle.style.left = Math.random() * 100 + 'vw';
      particle.style.top = Math.random() * 100 + 'vh';
      
      // Animación
      let duration = Math.random() * 10 + 5;
      particle.style.animation = `float ${duration}s infinite ease-in-out`;
      
      // Opacidad aleatoria
      particle.style.opacity = Math.random() * 0.7 + 0.3;
      
      document.body.appendChild(particle);
    }
  }

  /* ====== 🔄 AUTO-CARGA DESDE STORAGE ====== */
  let saved = localStorage.getItem("legionRoma");
  if (saved) {
    let data = JSON.parse(saved);
    
    // Si la fecha es diferente, restablecer misiones
    if (data.fecha !== fechaHoy()) {
      document.querySelectorAll('.dropdown-item[data-skill]').forEach(m => {
        m.classList.remove('disabled', 'text-success');
      });
    } else {
      skills = data.skills; 
      niveles = data.niveles; 
      sigma = data.sigma;
      
      // Marcar misiones completadas
      document.querySelectorAll('.dropdown-item[data-skill]').forEach(m => {
        let skill = m.dataset.skill;
        if (skills[skill] > 0) {
          m.classList.add('disabled', 'text-success');
        }
      });
    }
  }
  
  // Renderizar la interfaz
  render();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>